<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="js/script.js" async></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body style="background-color: #e6e6e6">
    <div class="container p-3 my-3 border">
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top" style="background-color: #262626 !important;">
            <div style="display:flex">
                <a class="navbar-brand" href="index.html">JavaScript30</a>
                <ul class="navbar-nav">
                    <li class="nav-item dropdown ">
                        <button class="btn btn-secondary dropdown-toggle bg-dark" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Wyzwania
                        </button>
                        <div class="dropdown-menu" id="dropdown" aria-labelledby="dropdownMenuButton">
                            <div class="row" id="dropdown-row">
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
    </div>

    <div class="container p-3 bg-dark " style=" border-radius: 2rem; color:#e6e6e6 ">
        <h1 style="text-align:center"> Challenge 11 : Custom HTML5 Video Player</h1>
        <p style="text-indent:1rem;margin-bottom:0;">
            Wyzwanie polega na stworzeniu customowego playera.
        </p>
        <div class="container my-3" id="challengeContainer">
            <div class="player" id="player_box">
                <video id="player_video" src="video/652333414.mp4"></video>
                <div id="video_controls">
                    <button id="playPausebtn" onclick="playPause(this,'player_video')"><i class="fas fa-play"></i></button>
                    <input id="slider" type="range" min="0" max="100" value="0" step="1" />
                    <div id="videoTime">
                        <span id="currentTimeText"></span>
                        <span id="durationTimeText"></span>
                    </div>
                    <button id="mute"><i class="fas fa-volume-mute"></i></button>
                        <input id="volume_slider" type="range" min="0" max="100" value="100" step="1" />
                    <button id="fullscreen_btn"><i class="fas fa-expand-arrows-alt"></i></button>
                </div>
            </div>
        </div>

        <p style="text-indent:1rem;margin-bottom:0;">
            Kod w javaScript który posłużył do zrobienia zadania:
        </p>
        <div class="container my-3 p-2" id="challengeCode">
            var bar = document.getElementById("video_controls");
            var video_player = document.getElementById("player_video");
            var player = document.getElementById("player_box");
            var slider = document.getElementById("slider");
            var current_time = document.getElementById("currentTimeText");
            var duration_time = document.getElementById("durationTimeText");
            var mutebtn = document.getElementById("mute");
            var mouse_pressed = false;
            var volume_slider = document.getElementById("volume_slider");
            var fullscreen = document.getElementById("fullscreen_btn");

            window.addEventListener("resize", windowResize);
            player.addEventListener("mouseenter", MouseOnPlayer);
            player.addEventListener("mouseleave", MouseOutPlayer);
            slider.addEventListener("change", videoTime);
            video_player.addEventListener("timeupdate", slideTimeUpdate);
            mutebtn.addEventListener("click", muteVideo);
            volume_slider.addEventListener("change", changeVolume);
            fullscreen.addEventListener("click", toggleFullScreen);

            window.onload = function () {
            bar.style.width = video_player.offsetWidth + "px";
            slideTimeUpdate();
            }

            slider.onmousedown = function() {
            mouse_pressed = true;
            }
            slider.onmouseup = function () {
            mouse_pressed = false;
            }

            function toggleFullScreen() {

            video_player.requestFullscreen();
            }

            function changeVolume() {
            video_player.volume = volume_slider.value / 100;
            }

            function muteVideo() {
            if (video_player.muted) {
            video_player.muted = false;
            mutebtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
            volume_slider.value = 100;
            video_player.volume = volume_slider.value/100;
            } else {
            video_player.muted = true;
            mutebtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            volume_slider.value = 0;
            video_player.volume = volume_slider.value;
            }

            }

            function slideTimeUpdate() {
            var current_min = Math.floor(video_player.currentTime / 60);
            var current_sec = Math.floor(video_player.currentTime - current_min * 60);
            var duration_min = Math.floor(video_player.duration / 60);
            var duration_sec = Math.floor(video_player.duration - duration_min * 60);

            if (current_sec < 10) {
            current_sec = "0" + current_sec;
            }
            if (duration_sec < 10) {
            duration_sec = "0" + duration_sec;
            }
            if (current_min < 10) {
            current_min = "0" + current_min;
            }
            if (duration_min < 10) {
            duration_min = "0" + duration_min;
            }
            current_time.innerHTML = current_min + ":" + current_sec + " / ";
            duration_time.innerHTML = duration_min + ":" + duration_sec;
            if (mouse_pressed) {
            return;
            }
            else {
            slider.value = video_player.currentTime * (100 / video_player.duration);
            }

            }

            function videoTime() {
            video_player.currentTime = video_player.duration * (slider.value / 100);
            }

            function windowResize() {
            bar.style.width = video_player.offsetWidth + "px";
            }
            function MouseOnPlayer() {
            bar.classList.add("mouseOn");
            bar.classList.remove("mouseOut");
            bar.style.opacity = "0.5";
            }
            function MouseOutPlayer() {
            bar.classList.add("mouseOut");
            bar.classList.remove("mouseOn");
            bar.style.opacity = "0";

            }
            function playPause(btn, video) {
            if (video_player.paused) {
            btn.innerHTML = "<i class='fas fa-play'></i>";
            video_player.play();

            } else {
            btn.innerHTML = '<i class="fas fa-stop"></i>';
            video_player.pause();
            }

            }
        </div>
    </div>

</body>
</html>

